<c:Window
    x:Class="LogicSimulator.Views.Windows.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:LogicSimulator.Controls;assembly=LogicSimulator.Controls"
    xmlns:con="clr-namespace:LogicSimulator.Infrastructure.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:infrastructure="clr-namespace:LogicSimulator.Infrastructure"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:scene="clr-namespace:LogicSimulator.Scene;assembly=LogicSimulator.Scene"
    xmlns:viewModels="clr-namespace:LogicSimulator.ViewModels"
    xmlns:views="clr-namespace:LogicSimulator.Views"
    Title="Logic-simulator"
    Width="1280"
    Height="720"
    DataContext="{Binding Path=MainWindowViewModel, Source={StaticResource Locator}}"
    mc:Ignorable="d">

    <c:Window.Resources>
        <con:Vector2Converter x:Key="Vector2Converter" />
    </c:Window.Resources>

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Файл">
                <MenuItem Header="Новый" />
                <MenuItem Command="{Binding Path=LoadExampleCommand}" Header="Загрузить пример" />
                <MenuItem Command="{Binding Path=SaveExampleCommand}" Header="Сохранить пример" />
                <Separator />
                <MenuItem Header="Выход" />
                <MenuItem Command="{Binding Path=TestCommand}" Header="Test" />
            </MenuItem>
        </Menu>

        <StatusBar Background="#424242" DockPanel.Dock="Bottom">
            <TextBlock
                Margin="0,0,5,0"
                Foreground="White"
                Text="{Binding Path=Scale, ElementName=Scene, StringFormat='Масштаб: {0:0.00}'}" />
            <TextBlock
                Margin="0,0,5,0"
                Foreground="White"
                Text="{Binding Path=MousePosition, ElementName=Scene, StringFormat='Позиция курсора: {0}', Converter={StaticResource Vector2Converter}}" />
        </StatusBar>

        <DockingManager>
            <LayoutRoot>
                <LayoutPanel>
                    <LayoutDocumentPane>
                        <LayoutDocument Title="Scene">
                            <scene:Scene2D
                                Components="{Binding Path=Components}"
                                Objects="{Binding Path=Objects}"
                                Tools="{Binding Path=Tools}" />
                        </LayoutDocument>
                        <LayoutDocument Title="Test">
                        </LayoutDocument>
                    </LayoutDocumentPane>
                </LayoutPanel>
            </LayoutRoot>
        </DockingManager>

        <!--<DockingManager DocumentsSource="{Binding Path=SchemeViewModels}">
            <DockingManager.LayoutItemTemplateSelector>
                <infrastructure:PanesTemplateSelector>
                    <infrastructure:PanesTemplateSelector.SchemeViewTemplate>
                        <DataTemplate DataType="{x:Type viewModels:SchemeViewModel}">
                            <views:SchemeSceneView />
                        </DataTemplate>
                    </infrastructure:PanesTemplateSelector.SchemeViewTemplate>
                </infrastructure:PanesTemplateSelector>
            </DockingManager.LayoutItemTemplateSelector>
            <DockingManager.LayoutItemContainerStyleSelector>
                <infrastructure:PanesStyleSelector>
                    <infrastructure:PanesStyleSelector.SchemeViewStyle>
                        <Style TargetType="{x:Type LayoutDocumentItem}">
                            <Setter Property="Title" Value="{Binding Model.Name}" />
                            <Setter Property="CanClose" Value="False" />
                        </Style>
                    </infrastructure:PanesStyleSelector.SchemeViewStyle>
                </infrastructure:PanesStyleSelector>
            </DockingManager.LayoutItemContainerStyleSelector>

            <LayoutRoot>
                <LayoutPanel>
                    <LayoutDocumentPane />
                </LayoutPanel>
            </LayoutRoot>
        </DockingManager>-->
    </DockPanel>
</c:Window>
